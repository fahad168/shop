<style>
    .splide__track--slide::marker {
        content: none !important;
    }

    [id^="thumbnail-carousel-slide"] {
        width: 100px !important;
        border-radius: 5px !important;
    }

    .splide__track--nav>.splide__list>.splide__slide.is-active {
        border: 2px solid black !important;
    }
</style>

<% hex = if %w[rgb hsl].any? { |prefix| @product.variants.first.color.start_with?(prefix) }
           convert_rgb_to_color(@product.variants.first.color).html
         else
           @product.variants.first.color
         end
%>

<div id="image_zoom" class="img-zoom-result absolute left-[50%] top-[20%]" style="display: none; z-index: 1"></div>
<div class="flex justify-start gap-[7rem] pt-10 pl-20 pr-20" id="product_showcase">
  <div class="-translate-x-full transition-all duration-1000 ease-in-out w-full lg:max-w-[600px] relative" id="show_slider">
    <%= render 'product_slider', variant: @product.variants.first %>
  </div>
  <div class="translate-x-full transition-all duration-1000 ease-in-out w-full" id="product_details">
    <div class="flex items-center gap-3">
      <% if @product.shop.shop_image.attached? %>
        <img class="h-10" src="<%= rails_blob_path(@product.shop.shop_image) %>">
      <% else %>
        <div class="flex flex-col p-3 rounded-full bg-gray-200 dark:bg-gray-600 border border-gray-300 dark:border-gray-500" id="shop_logo_preview">
          <svg class="h-10 fill-[#0F0F0F] dark:fill-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill-rule="evenodd" clip-rule="evenodd" d="M5.13238 1C4.07859 1 3.10207 1.5529 2.5599 2.45651L0.615776 5.69672C0.17816 6.42608 0.0121122 7.42549 0.508798 8.32014C0.789678 8.82607 1.27459 9.55181 2 10.1205V20C2 21.6569 3.34315 23 5 23H8C9.10457 23 10 22.1046 10 21V15H14V21C14 22.1046 14.8954 23 16 23H19C20.6569 23 22 21.6569 22 20V10.1205C22.7254 9.55181 23.2103 8.82607 23.4912 8.32014C23.9879 7.42548 23.8218 6.42608 23.3842 5.69672L21.4401 2.45651C20.8979 1.5529 19.9214 1 18.8676 1H5.13238ZM20 10.9697C19.8391 10.9895 19.6725 11 19.5 11C18.1259 11 17.1126 10.3216 16.4364 9.60481C16.2632 9.4211 16.1082 9.23119 15.9705 9.04325C15.2167 9.98812 13.9542 11 12 11C10.0458 11 8.7833 9.98812 8.02952 9.04325C7.89183 9.23119 7.73684 9.4211 7.56355 9.60481C6.8874 10.3216 5.87405 11 4.5 11C4.32752 11 4.16089 10.9895 4 10.9697V20C4 20.5523 4.44772 21 5 21H8V15C8 13.8954 8.89543 13 10 13H14C15.1046 13 16 13.8954 16 15V21H19C19.5523 21 20 20.5523 20 20V10.9697ZM4.27489 3.4855C4.45561 3.1843 4.78112 3 5.13238 3H18.8676C19.2189 3 19.5444 3.1843 19.7251 3.4855L21.6692 6.72571C21.8324 6.99765 21.8127 7.2231 21.7426 7.34937C21.2851 8.17345 20.5493 9 19.5 9C18.8448 9 18.323 8.69006 17.8913 8.23245C17.4506 7.76524 17.1659 7.20393 17.0284 6.88399C16.8114 6.37951 16.3329 6.21388 16.0033 6.21248C15.674 6.21109 15.1982 6.37172 14.9752 6.8683C14.6702 7.54754 13.7982 9 12 9C10.2018 9 9.32978 7.54754 9.0248 6.8683C8.80182 6.37172 8.32598 6.21109 7.99667 6.21248C7.66706 6.21388 7.18855 6.37951 6.97164 6.88399C6.83407 7.20393 6.5494 7.76524 6.10869 8.23245C5.67703 8.69006 5.15524 9 4.5 9C3.45065 9 2.71491 8.17345 2.2574 7.34937C2.1873 7.2231 2.1676 6.99765 2.33076 6.72571L4.27489 3.4855Z"></path> </g></svg>
        </div>
      <% end %>
      <p class="text-md font-bold"><%= @product.shop.name %></p>
    </div>
    <p class="text-4xl font-semibold mt-5"><%= @product.name %></p>
    <div class="flex mt-4">
      <svg class="w-4 h-4 text-yellow-300 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
        <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
      </svg>
      <svg class="w-4 h-4 text-yellow-300 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
        <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
      </svg>
      <svg class="w-4 h-4 text-yellow-300 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
        <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
      </svg>
      <svg class="w-4 h-4 text-yellow-300 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
        <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
      </svg>
      <svg class="w-4 h-4 ms-1 text-gray-300 dark:text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 20">
        <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"/>
      </svg>
      <p class="text-sm font-medium text-gray-300 -mt-[1px] ml-4">42 reviews</p>
    </div>
    <p class="text-5xl font-semibold mt-5 font-sans">$<%= @product.price %></p>
    <div class="mt-5 flex justify-between">
      <div>
        <div class="flex gap-3 items-center">
          <p class="text-sm text-black font-normal font-sans">Color</p>
          <div class="bg-gray-300 w-1 h-1 rounded-full"></div>
          <p class="text-sm text-gray-300 font-normal font-sans" id="variant_color"><%= @product.variants.first.color.present? ? ColorName.get("#{hex}") : '' %></p>
        </div>
        <div class="flex flex-row flex-wrap gap-2 mt-4">
          <% @product.variants.each_with_index do |variant, index| %>
            <div id="variant_<%= variant.id %>" class="<%= index == 0 ? 'border border-gray-700' : '' %> w-11 h-[3.3rem] rounded-lg flex items-center justify-center cursor-pointer" onclick="get_variant_details('<%= variant.id %>')">
              <div class="w-10 h-[3rem]">
                <img src="<%= rails_blob_path(variant.images.first.image) %>" class="object-cover w-full h-full rounded-lg">
              </div>
            </div>
          <% end %>
        </div>
        <div class="mt-5" id="sizes">
          <%= render 'size', variant: @product.variants.first %>
        </div>
      </div>
      <div class="w-60 flex flex-col gap-1 border border-gray-400 shadow-md rounded-lg p-2">
        <div class="flex gap-2 items-center">
          <span class="text-gray-500 text-md  font-normal">Delivery Fee:</span>
          <p class="cursor-pointer text-[#007185] text-sm">$<%= @product.delivery_fee %></p>
        </div>
        <div class="flex gap-2 items-center">
          <span class="text-gray-500 text-md  font-normal">In Stock:</span>
          <p class="cursor-pointer text-[#007185] text-sm"><%= @product.variants.first.sizes.first.in_stock %></p>
        </div>
        <div class="flex gap-2 items-center">
          <span class="text-gray-500 text-md font-normal">Return:</span>
          <p class="cursor-pointer text-[#007185] text-sm">Returnable in 7 days</p>
        </div>
      </div>
    </div>
    <div class="flex gap-4 mt-[6rem]">
      <button onclick="buy_now()" class="bg-[#FF8717] flex justify-center items-center gap-3 w-full rounded-lg h-[3rem] hover:opacity-75">
        <p class="text-white text-lg font-mono">Buy Now</p>
      </button>
      <button id="add_to_cart_button" onclick="add_to_cart('<%= @product.id %>', '<%= @product.variants.first.id %>', <%= @product.variants.first.sizes.first.id %>, 1, '<%= @product.price %>', 'add')" class="bg-black flex justify-center items-center gap-3 w-full rounded-lg h-[3rem] hover:opacity-75">
        <svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M8 11.01V11M16 11.01V11M16 8V7C16 5.93913 15.5786 4.92172 14.8284 4.17157C14.0783 3.42143 13.0609 3 12 3C10.9391 3 9.92172 3.42143 9.17157 4.17157C8.42143 4.92172 8 5.93913 8 7V8H6.84027C5.80009 8 4.93356 8.79732 4.84718 9.83391L4.18051 17.8339C4.08334 18.9999 5.00352 20 6.1736 20H17.8264C18.9965 20 19.9167 18.9999 19.8195 17.8339M16 8H17.1597C18.1999 8 19.0664 8.79732 19.1528 9.83391L19.5 14M16 8H12" stroke="#ffffff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
        <p class="text-white text-lg font-mono">Add to cart</p>
      </button>
    </div>

<!--    <div class="radio">-->
<!--      <input id="rating-5" type="radio" name="rating" value="5" />-->
<!--      <label for="rating-5" title="5 stars">-->
<!--        <svg viewBox="0 0 576 512" height="1em" xmlns="http://www.w3.org/2000/svg">-->
<!--          <path-->
<!--            d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"-->
<!--          ></path>-->
<!--        </svg>-->
<!--      </label>-->

<!--      <input id="rating-4" type="radio" name="rating" value="4" />-->
<!--      <label for="rating-4" title="4 stars">-->
<!--        <svg viewBox="0 0 576 512" height="1em" xmlns="http://www.w3.org/2000/svg">-->
<!--          <path-->
<!--            d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"-->
<!--          ></path>-->
<!--        </svg>-->
<!--      </label>-->

<!--      <input id="rating-3" type="radio" name="rating" value="3" />-->
<!--      <label for="rating-3" title="3 stars">-->
<!--        <svg viewBox="0 0 576 512" height="1em" xmlns="http://www.w3.org/2000/svg">-->
<!--          <path-->
<!--            d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"-->
<!--          ></path>-->
<!--        </svg>-->
<!--      </label>-->

<!--      <input id="rating-2" type="radio" name="rating" value="2" />-->
<!--      <label for="rating-2" title="2 stars">-->
<!--        <svg viewBox="0 0 576 512" height="1em" xmlns="http://www.w3.org/2000/svg">-->
<!--          <path-->
<!--            d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"-->
<!--          ></path>-->
<!--        </svg>-->
<!--      </label>-->

<!--      <input id="rating-1" type="radio" name="rating" value="1" />-->
<!--      <label for="rating-1" title="1 star">-->
<!--        <svg viewBox="0 0 576 512" height="1em" xmlns="http://www.w3.org/2000/svg">-->
<!--          <path-->
<!--            d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"-->
<!--          ></path>-->
<!--        </svg>-->
<!--      </label>-->
<!--    </div>-->
  </div>
</div>

<%= javascript_include_tag('shop/user/cart') %>