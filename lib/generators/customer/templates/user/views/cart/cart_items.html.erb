<% if cart_items.present? %>
  <% cart_items.each do |item| %>
    <div class="rounded-lg flex gap-7 border border-gray-200 bg-white shadow-sm dark:border-gray-700 dark:bg-gray-800 h-[10rem]">
      <div class="w-[20%]">
        <a href="#" class="shrink-0 md:order-1">
          <img class="h-full w-full rounded-tl-lg rounded-bl-lg dark:hidden object-cover" src="<%= rails_blob_path(item.variant.images.first.image) %>" alt="imac image" />
        </a>
      </div>
      <div class="space-y-4 md:flex md:items-center md:justify-start md:gap-6 md:space-y-0">
        <label for="counter-input" class="sr-only">Choose quantity:</label>
        <div class="flex items-center justify-between md:order-3 md:justify-end ml-20">
          <div class="flex items-center">
            <button style="<%= item.quantity == 1 ? 'display: none' : '' %>" onclick="update_cart_product('<%= item.product_id %>', '<%= item.variant_id %>', '<%= item.size_id %>', 1, '<%= item.product.price %>', 'remove', '<%= item.id %>', '<%= item.size.in_stock %>')" type="button" id="decrement-button-<%= item.id %>" data-input-counter-decrement="counter-input" class="inline-flex h-5 w-5 shrink-0 items-center justify-center rounded-md border border-gray-300 bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:hover:bg-gray-600 dark:focus:ring-gray-700">
              <svg class="h-2.5 w-2.5 text-gray-900 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 2">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h16" />
              </svg>
            </button>
            <input readonly type="text" id="counter-input-<%= item.id %>" data-input-counter class="w-10 shrink-0 border-0 bg-transparent text-center text-sm font-medium text-gray-900 focus:outline-none focus:ring-0 dark:text-white" placeholder="" value="<%= item.quantity %>" />
            <button style="<%= item.quantity == item.size.in_stock ? 'display: none' : '' %>" onclick="update_cart_product('<%= item.product_id %>', '<%= item.variant_id %>', '<%= item.size_id %>', 1, '<%= item.product.price %>', 'add', '<%= item.id %>', '<%= item.size.in_stock %>')" type="button" id="increment-button-<%= item.id %>" data-input-counter-increment="counter-input" class="inline-flex h-5 w-5 shrink-0 items-center justify-center rounded-md border border-gray-300 bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:hover:bg-gray-600 dark:focus:ring-gray-700">
              <svg class="h-2.5 w-2.5 text-gray-900 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 18">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 1v16M1 9h16" />
              </svg>
            </button>
          </div>
          <div class="text-end md:order-4 md:w-32">
            <p class="text-base font-bold text-gray-900 dark:text-white" id="item-amount-<%= item.id %>">$<%= item.amount %></p>
          </div>
        </div>

        <div class="w-full min-w-0 flex-1 space-y-4 md:order-2 md:max-w-md">
          <div class="">
            <div class="flex items-center gap-3">
              <% if item.product.shop.shop_image.attached? %>
                <img class="h-10" src="<%= rails_blob_path(item.product.shop.shop_image) %>">
              <% else %>
                <div class="flex flex-col p-3 rounded-full bg-gray-200 dark:bg-gray-600 border border-gray-300 dark:border-gray-500" id="shop_logo_preview">
                  <svg class="h-10 fill-[#0F0F0F] dark:fill-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill-rule="evenodd" clip-rule="evenodd" d="M5.13238 1C4.07859 1 3.10207 1.5529 2.5599 2.45651L0.615776 5.69672C0.17816 6.42608 0.0121122 7.42549 0.508798 8.32014C0.789678 8.82607 1.27459 9.55181 2 10.1205V20C2 21.6569 3.34315 23 5 23H8C9.10457 23 10 22.1046 10 21V15H14V21C14 22.1046 14.8954 23 16 23H19C20.6569 23 22 21.6569 22 20V10.1205C22.7254 9.55181 23.2103 8.82607 23.4912 8.32014C23.9879 7.42548 23.8218 6.42608 23.3842 5.69672L21.4401 2.45651C20.8979 1.5529 19.9214 1 18.8676 1H5.13238ZM20 10.9697C19.8391 10.9895 19.6725 11 19.5 11C18.1259 11 17.1126 10.3216 16.4364 9.60481C16.2632 9.4211 16.1082 9.23119 15.9705 9.04325C15.2167 9.98812 13.9542 11 12 11C10.0458 11 8.7833 9.98812 8.02952 9.04325C7.89183 9.23119 7.73684 9.4211 7.56355 9.60481C6.8874 10.3216 5.87405 11 4.5 11C4.32752 11 4.16089 10.9895 4 10.9697V20C4 20.5523 4.44772 21 5 21H8V15C8 13.8954 8.89543 13 10 13H14C15.1046 13 16 13.8954 16 15V21H19C19.5523 21 20 20.5523 20 20V10.9697ZM4.27489 3.4855C4.45561 3.1843 4.78112 3 5.13238 3H18.8676C19.2189 3 19.5444 3.1843 19.7251 3.4855L21.6692 6.72571C21.8324 6.99765 21.8127 7.2231 21.7426 7.34937C21.2851 8.17345 20.5493 9 19.5 9C18.8448 9 18.323 8.69006 17.8913 8.23245C17.4506 7.76524 17.1659 7.20393 17.0284 6.88399C16.8114 6.37951 16.3329 6.21388 16.0033 6.21248C15.674 6.21109 15.1982 6.37172 14.9752 6.8683C14.6702 7.54754 13.7982 9 12 9C10.2018 9 9.32978 7.54754 9.0248 6.8683C8.80182 6.37172 8.32598 6.21109 7.99667 6.21248C7.66706 6.21388 7.18855 6.37951 6.97164 6.88399C6.83407 7.20393 6.5494 7.76524 6.10869 8.23245C5.67703 8.69006 5.15524 9 4.5 9C3.45065 9 2.71491 8.17345 2.2574 7.34937C2.1873 7.2231 2.1676 6.99765 2.33076 6.72571L4.27489 3.4855Z"></path> </g></svg>
                </div>
              <% end %>
              <p class="text-md font-bold"><%= item.product.shop.name %></p>
            </div>
            <a href="#" class="text-base font-bold text-gray-900 hover:underline dark:text-white"><%= item.product.name %></a>
            <p class="text-base font-medium text-gray-500 dark:text-white w-80 truncate"><%= item.product.description %> Best Shirts In the world Best Shirts In the world Best Shirts In the world</p>
          </div>

          <div class="flex items-center gap-4">
            <button type="button" class="inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-900 hover:underline dark:text-gray-400 dark:hover:text-white">
              <svg class="me-1.5 h-5 w-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12.01 6.001C6.5 1 1 8 5.782 13.001L12.011 20l6.23-7C23 8 17.5 1 12.01 6.002Z" />
              </svg>
              Add to Favorites
            </button>

            <button onclick="remove_item('<%= item.id %>')" type="button" class="inline-flex items-center text-sm font-medium text-red-600 hover:underline dark:text-red-500">
              <svg class="me-1.5 h-5 w-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 17.94 6M18 18 6.06 6" />
              </svg>
              Remove
            </button>
          </div>
        </div>
      </div>
    </div>
  <% end %>
<% else %>
  <div class="flex flex-row justify-center items-center">
    <video autoplay loop muted src="<%= asset_path('empty_cart.mp4') %>" class="w-[30rem] h-[30rem]"></video>
  </div>
<% end %>